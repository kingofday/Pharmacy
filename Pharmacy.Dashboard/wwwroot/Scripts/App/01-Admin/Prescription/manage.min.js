function imageZoom(n,t){function f(n){var h,t,f;n.preventDefault();h=s(n);t=h.x-i.offsetWidth/2;f=h.y-i.offsetHeight/2;t>r.width-i.offsetWidth&&(t=r.width-i.offsetWidth);t<0&&(t=0);f>r.height-i.offsetHeight&&(f=r.height-i.offsetHeight);f<0&&(f=0);i.style.left=t+"px";i.style.top=f+"px";u.style.backgroundPosition="-"+t*e+"px -"+f*o+"px"}function s(n){var u,t=0,i=0;return n=n||window.event,u=r.getBoundingClientRect(),t=n.pageX-u.left,i=n.pageY-u.top,t=t-window.pageXOffset,i=i-window.pageYOffset,{x:t,y:i}}var r,i,u,e,o;r=document.getElementById(n);u=document.getElementById(t);i=document.createElement("DIV");i.setAttribute("class","img-zoom-lens");r.parentElement.insertBefore(i,r);e=u.offsetWidth/i.offsetWidth;o=u.offsetHeight/i.offsetHeight;u.style.backgroundImage="url('"+r.src+"')";u.style.backgroundSize=r.width*e+"px "+r.height*o+"px";i.addEventListener("mousemove",f);r.addEventListener("mousemove",f);i.addEventListener("touchmove",f);r.addEventListener("touchmove",f)}var items=[];$(document).ready(function(){$(document).on("click","#btn-add-item",function(){var i=(n,t,i)=>`<tr class="new-item" data-price="${i}">
                            <td>${n}</td>
                            <td>${t}</td>
                            <td><i class="delete-item zmdi zmdi-delete"></td>
                        </tr>`,n;let t=$("#modal #DrugId");if(n=t.select2("data"),n[0].id){let r=0;$("#items tr").each(function(){$(this).data("price")&&(r+=$(this).data("price"))});console.log(r);$(i(n[0].text,n[0].id,n[0].Price)).insertBefore($("tr.total-sum"));items.push(n[0].id);t.val(null).trigger("change")}});$(document).on("click",".delete-item",function(){let n=$(this).closest("tr"),t=n.data("url");if(t)ajaxActionLink.inProgress(n),$.post(t).done(function(t){ajaxActionLink.normal();t.Issuccessful?n.remove():showNotif(notifyType.danger,t.Message)}).fail(function(){ajaxActionLink.normal();showNotif(notifyType.danger,strings.error)});else{let t=$(".new-item").index(n);items.splice(t,1);n.remove()}});$(document).on("click",".btn-submit",function(n){n.stopPropagation();let t=$(this),i=t.closest("form");if(i.valid()){let r=customSerialize($("#frm-drug-store"));r.Items=items.map(n=>({DrugId:n}));ajaxBtn.inProgress(t);$.ajax({type:"POST",url:i.attr("action"),data:r,success:function(n){ajaxBtn.normal();n.IsSuccessful?$("#modal").modal("hide"):showNotif(notifyType.danger,n.Message)},error:function(){ajaxBtn.normal()}})}})});